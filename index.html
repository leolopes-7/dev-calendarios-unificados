<!DOCTYPE html>
<html lang="pt-BR" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TPL Marari - Consulta de Carrinhos e Display</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <header>
      <h1>TPL Marari - Consulta de Carrinhos e Display</h1>
      <button id="theme-toggle">
        <span id="theme-icon">üåô</span>
        <span id="theme-text">Modo escuro</span>
      </button>
    </header>

    <section class="ponto-selector">
      <label><input type="radio" name="ponto" value="1" />Ponto 1 - Mercado P&B</label>
      <label><input type="radio" name="ponto" value="2" />Ponto 2 - Ponto 5131</label>
      <label><input type="radio" name="ponto" value="3" />Ponto 3 - Jardim Miriam</label>
      <label><input type="radio" name="ponto" value="4" />Ponto 4 - Santa Francisca</label>
      <label><input type="radio" name="ponto" value="5" />Ponto 5 - Santo Afonso</label>
      <label><input type="radio" name="ponto" value="6" />Ponto 6 - Av Cupece</label>
    </section>

    <iframe id="calendar" src="" frameborder="0"></iframe>
  </div>

  <script>
    const calendarMap = {
      1: "https://calendar.google.com/calendar/u/0?cid=dHBsLm1hcmFyaUBnbWFpbC5jb20",
      2: "https://calendar.google.com/calendar/u/0?cid=Y185OTYzZWYzNzFlYjQ2MDU3YjQ1Yjc1MjVmMzBiZTY0NzhjZjU5OGNmNTk1YjliOTgxNzcxNjE5NzU3NDlmYTRjQGdyb3VwLmNhbGVuZGFyLmdvb2dsZS5jb20",
      3: "https://calendar.google.com/calendar/u/0?cid=Y19jNTI4ZjExZWE4YTU0OTMwYWI5OGM4ZTVkNThlN2ZjNTQ2Yzc1YmQ1YmE3Y2Y5ZTJmM2U2NjAzMmEwMmMzZDM1QGdyb3VwLmNhbGVuZGFyLmdvb2dsZS5jb20",
      4: "https://calendar.google.com/calendar/u/0?cid=Y18yZjA2ODkxNjcyZWFiZjk3NTY2N2I4YjEzMzVkNWE3ZmYxMmNiM2QwYjM3ZDg4ZjVjM2NhYmYxNTM2YThhZGUzY0Bncm91cC5jYWxlbmRhci5nb29nbGUuY29t",
      5: "https://calendar.google.com/calendar/u/0?cid=Y18zZGRmZTczZmVkNTcyNThhZmZjNzRmZDZjZGUxNzEzYmQ4N2MyZDY5N2FiMjg2MjEyZjAzN2U1ZmUwOGY2MjNkZEBncm91cC5jYWxlbmRhci5nb29nbGUuY29t",
      6: "https://calendar.google.com/calendar/u/0?cid=OWRlMmM4MTg3YWI3YTQ3ZGRiYzBmZjljYTJmNzY1ZTA0ZjljNzI0NmE5ZDlmMDU5NDk4NTQ2MDFhZTVmNjg2M0Bncm91cC5jYWxlbmRhci5nb29nbGUuY29t"
    };

    const radioButtons = document.querySelectorAll('input[name="ponto"]');
    const calendarFrame = document.getElementById('calendar');
    const themeToggle = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-icon');
    const themeText = document.getElementById('theme-text');
    const rootElement = document.documentElement;

    // Load saved settings
    const savedPonto = localStorage.getItem('selectedPonto');
    const savedTheme = localStorage.getItem('theme');

    if (savedPonto) {
      document.querySelector(`input[name="ponto"][value="${savedPonto}"]`).checked = true;
      calendarFrame.src = calendarMap[savedPonto];
    }

    if (savedTheme) {
      rootElement.setAttribute("data-theme", savedTheme);
      themeIcon.textContent = savedTheme === "dark" ? "‚òÄÔ∏è" : "üåô";
      themeText.textContent = savedTheme === "dark" ? "Modo claro" : "Modo escuro";
    }

    radioButtons.forEach(radio => {
      radio.addEventListener('change', () => {
        const selected = radio.value;
        calendarFrame.src = calendarMap[selected];
        localStorage.setItem('selectedPonto', selected);
      });
    });

    themeToggle.addEventListener('click', () => {
      const currentTheme = rootElement.getAttribute("data-theme");
      const newTheme = currentTheme === "light" ? "dark" : "light";
      rootElement.setAttribute("data-theme", newTheme);
      localStorage.setItem("theme", newTheme);
      themeIcon.textContent = newTheme === "dark" ? "‚òÄÔ∏è" : "üåô";
      themeText.textContent = newTheme === "dark" ? "Modo claro" : "Modo escuro";
    });
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TPL Marari - Consulta de Carrinhos e Display</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="header">
    <img src="logo.png" alt="Logo" class="logo-img" />
    <h1>
      TPL Marari - Consulta de Carrinhos e Display
      <span class="beta-badge">Beta</span>
    </h1>
    <button id="darkModeToggle">
      <span class="icon">ðŸŒ™</span>
      <span class="mode-text">Modo escuro</span>
    </button>
  </header>

  <main class="main-container">
    <div class="calendar-checkboxes">
      <label class="calendar-checkbox">
        <input type="radio" name="calendar" value="Ponto1" checked />
        <span class="checkmark"></span>
        <strong>Ponto 1</strong> - Padaria Jd das Oliveiras
      </label>
      <label class="calendar-checkbox">
        <input type="radio" name="calendar" value="Ponto2" />
        <span class="checkmark"></span>
        <strong>Ponto 2</strong> - Mercado P&B | Ponto 5131
      </label>
      <label class="calendar-checkbox">
        <input type="radio" name="calendar" value="Ponto3" />
        <span class="checkmark"></span>
        <strong>Ponto 3</strong> - PraÃ§a Casa Palma
      </label>
      <label class="calendar-checkbox">
        <input type="radio" name="calendar" value="Ponto4" />
        <span class="checkmark"></span>
        <strong>Ponto 4</strong> - Padaria Primicia
      </label>
      <label class="calendar-checkbox">
        <input type="radio" name="calendar" value="Ponto5" />
        <span class="checkmark"></span>
        <strong>Ponto 5</strong> - Viaduto Washington Luiz
      </label>
    </div>

    <div class="calendar-container">
      <iframe id="calendarIframe" src="" frameborder="0"></iframe>
    </div>
  </main>

  <script>
    const darkModeToggle = document.getElementById("darkModeToggle");
    const modeText = document.querySelector(".mode-text");

    darkModeToggle.addEventListener("click", () => {
      document.body.classList.toggle("dark-mode");
      const isDark = document.body.classList.contains("dark-mode");
      modeText.textContent = isDark ? "Modo claro" : "Modo escuro";
    });

    const calendarMap = {
      Ponto1: "af1c95f4ae2831bba53c1cc769e785aefeb836b86a6af22aee8b1d2b73e6e190%40group.calendar.google.com",
      Ponto2: "e34e0be9c80ce654dc03c852e6e3c52af2f53d129295e297861523cbbeff93c2%40group.calendar.google.com",
      Ponto3: "d6c38e409070037546660123a107f4b95f65681a96c216cac7903d58465f5530%40group.calendar.google.com",
      Ponto4: "e22e471e522d36c6e1bca2edfcecfbc5ea23c9af8b5b4d10004bf2c7e4b2261f%40group.calendar.google.com",
      Ponto5: "1aa2749c04ae9ac703fa3b2ebbee2db79105711fcda01f98b82da998bc7488ce%40group.calendar.google.com"
    };

    const selectedCalendars = [calendarMap["Ponto1"]]; // PadrÃ£o inicial

    function updateIframe() {
      const iframe = document.getElementById("calendarIframe");
      let src = "https://calendar.google.com/calendar/embed?";
      src += "ctz=America%2FSao_Paulo";
      src += "&mode=AGENDA";

      const colorMap = {
        "af1c95f4ae2831bba53c1cc769e785aefeb836b86a6af22aee8b1d2b73e6e190@group.calendar.google.com": "#2952A3",
        "e34e0be9c80ce654dc03c852e6e3c52af2f53d129295e297861523cbbeff93c2@group.calendar.google.com": "#0D7813",
        "d6c38e409070037546660123a107f4b95f65681a96c216cac7903d58465f5530@group.calendar.google.com": "#E67C73",
        "e22e471e522d36c6e1bca2edfcecfbc5ea23c9af8b5b4d10004bf2c7e4b2261f@group.calendar.google.com": "#B1365F",
        "1aa2749c04ae9ac703fa3b2ebbee2db79105711fcda01f98b82da998bc7488ce@group.calendar.google.com": "#893B90"
      };

      selectedCalendars.forEach(calendar => {
        const clean = calendar.replace("%40", "@");
        const color = colorMap[clean] || "#2952A3";
        src += "&src=" + calendar + "&color=" + encodeURIComponent(color);
      });

      iframe.src = src;
    }

    document.querySelectorAll('input[name="calendar"]').forEach(input => {
      input.addEventListener("change", () => {
        selectedCalendars.length = 0;
        selectedCalendars.push(calendarMap[input.value]);
        updateIframe();
      });
    });

    updateIframe();
  </script>
</body>
</html>
